@model List<AfReparosAutomotivos.Models.Orcamentos>


@{
    ViewData["Title"] = "Lista de Or√ßamentos";
}
@* 
<div class=""><a asp-controller="Orcamentos" asp-action="Create" class="btn btn-primary fw-semibold">Novo Or√ßamento</a></div> 
<br> *@

<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center">
        <h2 class="mb-4 text-center">üîç Filtros de Or√ßamentos</h2>
        <a asp-action="Create" class="btn btn-primary">
            <i class="bi bi-plus-circle"></i> Novo Or√ßamento
        </a>
    </div>

    <form method="get" asp-action="Index" class="card shadow-sm p-4 mb-4">
        <div class="row g-3 align-items-end">

            <!-- CPF -->
            <div class="col-md-3">
                <label class="form-label fw-semibold">CPF do Cliente</label>
                <div class="input-group">
                    <span class="input-group-text bg-primary text-white">
                        <i class="bi bi-person-vcard"></i>
                    </span>
                    <input type="text" name="cpf" class="form-control" placeholder="Digite o CPF" value="" />
                </div>
            </div>

            <!-- Nome -->
            <div class="col-md-3">
                <label class="form-label fw-semibold">Nome do Cliente</label>
                <div class="input-group">
                    <span class="input-group-text bg-primary text-white">
                        <i class="bi bi-person-fill"></i>
                    </span>
                    <input type="text" name="nome" class="form-control" placeholder="Digite o nome" value="" />
                </div>
            </div>

            <!-- Data de Cria√ß√£o -->
            <div class="col-md-3">
                <label class="form-label fw-semibold">Data de Cria√ß√£o</label>
                <div class="input-group">
                    <span class="input-group-text bg-primary text-white">
                        <i class="bi bi-calendar-date"></i>
                    </span>
                    <input type="date" name="dataCriacao" class="form-control" value="" />
                </div>
            </div>

            <!-- Data de Entrega -->
            <div class="col-md-3">
                <label class="form-label fw-semibold">Data de Entrega</label>
                <div class="input-group">
                    <span class="input-group-text bg-primary text-white">
                        <i class="bi bi-calendar-check"></i>
                    </span>
                    <input type="date" name="dataEntrega" class="form-control" value="" />
                </div>
            </div>

            <!-- M√©todo de Pagamento -->
            <div class="col-md-3">
                <label class="form-label fw-semibold">M√©todo de Pagamento</label>
                <div class="input-group">
                    <span class="input-group-text bg-primary text-white">
                        <i class="bi bi-credit-card"></i>
                    </span>
                    <select name="metodoPagamento" class="form-select">
                        <option value="">Todos</option>
                        <option value="Dinheiro">Dinheiro</option>
                        <option value="Pix">Pix</option>
                        <option value="Cart√£o de Cr√©dito">Cart√£o de Cr√©dito</option>
                        <option value="Cart√£o de D√©bito">Cart√£o de D√©bito</option>
                        <option value="Boleto">Boleto</option>
                    </select>
                </div>
            </div>

            <!-- Status -->
            <div class="col-md-3">
                <label class="form-label fw-semibold">Status</label>
                <div class="input-group">
                    <span class="input-group-text bg-primary text-white">
                        <i class="bi bi-flag"></i>
                    </span>
                    <select name="status" class="form-select">
                        <option value="">Todos</option>
                        <option value="Pendente">Pendente</option>
                        <option value="Conclu√≠do">Conclu√≠do</option>
                        <option value="Cancelado">Cancelado</option>
                    </select>
                </div>
            </div>

            <!-- N√∫mero de Parcelas -->
            <div class="col-md-3">
                <label class="form-label fw-semibold">N¬∫ de Parcelas</label>
                <div class="input-group">
                    <span class="input-group-text bg-primary text-white">
                        <i class="bi bi-list-ol"></i>
                    </span>
                    <input type="number" name="parcelas" class="form-control" min="1" placeholder="Ex: 3" value="" />
                </div>
            </div>

            <!-- Pre√ßo -->
            <div class="col-md-3">
                <label class="form-label fw-semibold">Pre√ßo M√°ximo</label>
                <div class="input-group">
                    <span class="input-group-text bg-primary text-white">
                        <i class="bi bi-cash"></i>
                    </span>
                    <input type="number" name="preco" step="0.01" class="form-control" placeholder="Ex: 1500.00" value="" />
                </div>
            </div>

            <!-- Bot√µes -->
            <div class="col-md-12 d-flex gap-2">
                <button type="submit" class="btn btn-success flex-fill">
                    <i class="bi bi-search"></i> Buscar
                </button>
                <a asp-action="Index" class="btn btn-outline-secondary flex-fill">
                    <i class="bi bi-x-circle"></i> Limpar
                </a>
                @* <a asp-action="Create" class="btn btn-primary flex-fill">
                    <i class="bi bi-plus-circle"></i> Novo
                </a> *@
            </div>
        </div>
    </form>

<table class="table table-striped">
    <thead>
        <tr class="table-primary">
            <th class="text-left fw-semibold" scope="col">@Html.DisplayNameFor(model => model.First().idOrcamento)</th>
            <th class="text-end fw-semibold" scope="col">A√ß√µes</th>
        </tr>
    </thead>
    <tbody>
@foreach (var item in Model)
        {
            <tr>
                @* Apenas o valor do ID ser√° exibido na linha *@
                <td>
                    @Html.DisplayFor(modelItem => item.idOrcamento)
                </td>
                
                @* Coluna de A√ß√µes: Ver, Editar, Excluir *@
                <td class="d-flex align-middle justify-content-end gap-2">
                    @* 1. BOT√ÉO VER (aponta para a Action Details) *@
                    <a asp-action="Details" asp-route-id="@item.idOrcamento" class="btn btn-sm" title="Ver">
                        <i class="fas fa-eye"></i>
                    </a>
                    
                    @* 2. BOT√ÉO EDITAR (aponta para a Action Edit) *@
                    <a asp-action="Edit" asp-route-id="@item.idOrcamento" class="btn btn-sm" title="Editar">
                        <i class="fas fa-pencil-alt"></i>
                    </a>
                    
                    @* 3. FORMUL√ÅRIO EXCLUIR (aponta para a Action Delete, via POST) *@
                    <form asp-action="Delete" asp-route-id="@item.idOrcamento" method="post" style="display:inline;">
                        <button type="submit" class="btn btn-sm" title="Excluir"
                                onclick="return confirm('Tem certeza que deseja excluir o Or√ßamento @item.idOrcamento?');">
                            <i class="fa fa-trash-alt"></i>
                        </button>
                    </form>
                </td>
            </tr>
        }
    </tbody>
</table>
